<div class="login-page">
  <div class="login-card">
    <!-- LEFT PANEL -->
    <div class="login-card__left">
      <div class="brand">
        <span class="brand-name">
          <img src="/images/logo.png" alt="FinLaw Logo" class="brand-logo" />
        </span>
      </div>

      <div class="welcome-text">
        <h2>Letâ€™s get you started</h2><br /><br /><br>
        <h1>CREATE <br /><br />ACCOUNT</h1>
        <p>
         Create your account to access workflow automation, secure documentation and client management tools designed for financial and legal professionals.
        </p>
      </div>
    </div>

    <!-- RIGHT PANEL: FORM -->
    <div class="login-card__right">
      <form [formGroup]="form" (ngSubmit)="onSubmit()" class="login-form">
        <h2>New Account</h2>
        <p class="subtitle">
          Fill in the details below to create your account.
        </p>

        <!-- Full name -->
        <mat-form-field appearance="outline" class="form-field">
          <mat-label>Full name</mat-label>
          <input matInput formControlName="fullName" />
          <mat-error *ngIf="form.get('fullName')?.hasError('required') && form.get('fullName')?.touched">
            Full name is required
          </mat-error>
        </mat-form-field>

        <!-- Email -->
        <mat-form-field appearance="outline" class="form-field">
          <mat-label>Email</mat-label>
          <input matInput formControlName="email" />
          <mat-error *ngIf="form.get('email')?.hasError('required') && form.get('email')?.touched">
            Email is required
          </mat-error>
          <mat-error *ngIf="form.get('email')?.hasError('email') && !form.get('email')?.hasError('required')">
            Please enter a valid email
          </mat-error>
        </mat-form-field>

        <!-- Password -->
        <mat-form-field appearance="outline" class="form-field">
          <mat-label>Password</mat-label>
          <input
            matInput
            [type]="hidePassword ? 'password' : 'text'"
            formControlName="password"
          />
          <button
            mat-icon-button
            type="button"
            matSuffix
            (click)="hidePassword = !hidePassword"
          >
            <mat-icon>{{ hidePassword ? 'visibility_off' : 'visibility' }}</mat-icon>
          </button>

          <mat-error *ngIf="form.get('password')?.hasError('required') && form.get('password')?.touched">
            Password is required
          </mat-error>
          <mat-error *ngIf="form.get('password')?.hasError('minlength') && !form.get('password')?.hasError('required')">
            Minimum 6 characters
          </mat-error>
        </mat-form-field>

        <!-- Confirm password -->
        <mat-form-field appearance="outline" class="form-field">
          <mat-label>Confirm password</mat-label>
          <input
            matInput
            [type]="hideConfirmPassword ? 'password' : 'text'"
            formControlName="confirmPassword"
          />
          <button
            mat-icon-button
            type="button"
            matSuffix
            (click)="hideConfirmPassword = !hideConfirmPassword"
          >
            <mat-icon>{{ hideConfirmPassword ? 'visibility_off' : 'visibility' }}</mat-icon>
          </button>

          <mat-error *ngIf="form.get('confirmPassword')?.hasError('required') && form.get('confirmPassword')?.touched">
            Please confirm your password
          </mat-error>
          <mat-error *ngIf="form.get('confirmPassword')?.hasError('mismatch') && !form.get('confirmPassword')?.hasError('required')">
            Passwords do not match
          </mat-error>
        </mat-form-field>

        <!-- Accept terms -->
        <div class="form-options">
          <mat-checkbox formControlName="acceptTerms">
            I accept the terms and conditions
          </mat-checkbox>

          <button
            class="link-btn"
            type="button"
            (click)="goToLogin()"
          >
            Already have an account?
          </button>
        </div>

        <button
          mat-raised-button
          class="login-btn"
          type="submit"
          [disabled]="form.invalid || isSubmitting"
        >
          <ng-container *ngIf="!isSubmitting; else loadingTpl">
            Register
          </ng-container>
          <ng-template #loadingTpl>
            Creating...
          </ng-template>
        </button>
      </form>
    </div>
  </div>
</div>
